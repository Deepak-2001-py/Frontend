<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="GradeAnt: AI-Powered Homework Grader for students and teachers" />
  <title>GradeAnt: AI-Powered Homework Grader</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../img/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon-32x32.png" />
  <link rel="apple-touch-icon" href="../img/apple-touch-icon.png" />
  
  <!-- Styles -->
  <link rel="stylesheet" href="../css/asthetic_style.css" />
  <link rel="stylesheet" href="../css/nav.css" />
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  
  <!-- Additional Professional Styles -->
  <style>
    /* Professional upload interface enhancements */
    .upload-section {
      display: none;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }
    
    .upload-section.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    
    .upload-option {
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      margin-bottom: 1rem;
    }
    
    .upload-option:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      border-color: #007bff;
    }
    
    .upload-option.selected {
      border-color: #007bff;
      background: linear-gradient(135deg, #f8f9ff 0%, #e8f2ff 100%);
    }
    
    .file-upload-label {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .file-upload-label:hover {
      background: #f8f9fa;
    }
    
    .file-upload-label.highlight {
      background: #e3f2fd;
      border: 2px dashed #2196f3;
    }
    
    .file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem;
      margin-bottom: 0.5rem;
      background: #f8f9fa;
      border-radius: 5px;
      border-left: 4px solid #28a745;
    }
    
    .file-item .file-info {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .file-item .file-size {
      font-size: 0.875rem;
      color: #6c757d;
    }
    
    .file-item .remove-file {
      color: #dc3545;
      cursor: pointer;
      padding: 0.25rem 0.5rem;
      border-radius: 3px;
      transition: background 0.2s;
    }
    
    .file-item .remove-file:hover {
      background: #f5c6cb;
    }
    
    .professional-form {
      background-color: var(--light-secondary);
      padding: 1.25rem;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    
    .alert {
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 5px;
    }
    
    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .alert-info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .progress-container {
      margin: 1rem 0;
    }
    
    .progress {
      height: 20px;
      background: #e9ecef;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #28a745, #20c997);
      transition: width 0.3s ease;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .form-row {
        flex-direction: column;
      }
      
      .form-group {
        width: 100%;
        margin-bottom: 1rem;
      }
      
      .upload-option {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation will be loaded here -->
  <div id="nav"></div>
  
  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <section id="upload-section" class="tab-content active" role="tabpanel" aria-labelledby="upload-tab-btn">
        <div class="card">
          <div class="card-header">
            <h2><i class="fas fa-file-upload"></i> Upload Assignment</h2>
            <p>Choose your upload type and submit your files in PDF format.</p>
          </div>
          <div class="card-body">
            
            <!-- Upload Type Selector -->
            <div class="upload-type-selector">
              <div class="section-intro">
                <h2>Choose Your Upload Type</h2>
                <p>Select the type of educational content you want to upload to GradeAnt's AI-powered grading system.</p>
              </div>
              <div class="upload-options">
                <div class="upload-option card" data-type="teacher">
                  <div class="option-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                  </div>
                  <div class="option-content">
                    <h3>Question Paper Upload</h3>
                    <p>Upload original question papers and assignments for AI analysis and grading preparation</p>
                    <div class="option-features">
                      <span class="feature-tag"><i class="fas fa-brain"></i> AI Analysis</span>
                      <span class="feature-tag"><i class="fas fa-chart-line"></i> Auto-Grading Setup</span>
                    </div>
                  </div>
                  <div class="option-arrow">
                    <i class="fas fa-arrow-right"></i>
                  </div>
                </div>
                <div class="upload-option card" data-type="answer">
                  <div class="option-icon">
                    <i class="fas fa-file-certificate"></i>
                  </div>
                  <div class="option-content">
                    <h3>Answer Key Upload</h3>
                    <p>Upload comprehensive solution keys and rubrics for accurate AI-powered assessment</p>
                    <div class="option-features">
                      <span class="feature-tag"><i class="fas fa-check-circle"></i> Solution Mapping</span>
                      <span class="feature-tag"><i class="fas fa-graduation-cap"></i> Smart Grading</span>
                    </div>
                  </div>
                  <div class="option-arrow">
                    <i class="fas fa-arrow-right"></i>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Question Paper Upload Section -->
            <div id="teacher-section" class="upload-section">
              <div class="section-header">
                <div class="header-content">
                  <div class="header-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                  </div>
                  <div class="header-text">
                    <h2>Question Paper Upload Center</h2>
                    <p>Upload your educational content to leverage GradeAnt's advanced AI grading technology</p>
                  </div>
                </div>
                <div class="header-stats">
                  <div class="stat-item">
                    <i class="fas fa-lightning-bolt"></i>
                    <span>Instant Processing</span>
                  </div>
                  <div class="stat-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Secure Upload</span>
                  </div>
                  <div class="stat-item">
                    <i class="fas fa-robot"></i>
                    <span>AI-Powered</span>
                  </div>
                </div>
              </div>
              
              <form id="teacher-form" class="form professional-form" action="#" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="upload-type" value="teacher" />
                
                <div class="form-section">
                  <div class="section-title">
                    <h3><i class="fas fa-info-circle"></i> Assignment Details</h3>
                    <p>Provide essential information about your assignment</p>
                  </div>
                  
                  <div class="form-row">
                    <div class="form-group">
                      <label for="teacher-assignment-id">
                        <i class="fas fa-hashtag"></i> Assignment ID
                        <span class="required">*</span>
                      </label>
                      <input type="text" id="teacher-assignment-id" class="form-control" 
                             placeholder="e.g. PHYS_2024_MIDTERM_01" required />
                      <div class="field-help">Unique identifier for tracking and organization</div>
                    </div>
                    <div class="form-group">
                      <label for="teacher-course-id">
                        <i class="fas fa-book"></i> Course Code
                      </label>
                      <input type="text" id="teacher-course-id" class="form-control" 
                             placeholder="e.g. PHYS-101, MATH-205" />
                      <div class="field-help">Course or subject classification code</div>
                    </div>
                  </div>
                  
                  <div class="form-row">
                    <div class="form-group">
                      <label for="teacher-subject">
                        <i class="fas fa-graduation-cap"></i> Subject Area
                      </label>
                      <input type="text" id="teacher-subject" class="form-control" 
                             placeholder="e.g. Advanced Physics, Calculus II" />
                      <div class="field-help">Subject or topic focus</div>
                    </div>
                    <div class="form-group">
                      <label for="teacher-total-marks">
                        <i class="fas fa-award"></i> Total Marks
                      </label>
                      <input type="number" id="teacher-total-marks" class="form-control" 
                             placeholder="100" />
                      <div class="field-help">Maximum possible score</div>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="teacher-student-id">
                      <i class="fas fa-user"></i> Student ID
                    </label>
                    <input type="text" id="teacher-student-id" class="form-control" 
                           placeholder="e.g. STU_2024_001" />
                    <div class="field-help">Student identification number</div>
                  </div>
                </div>
                
                <div class="form-section">
                  <div class="section-title">
                    <h3><i class="fas fa-cloud-upload-alt"></i> File Upload</h3>
                    <p>Upload your question paper files (PDF format supported)</p>
                  </div>
                  
                  <div class="file-upload advanced-upload">
                    <div class="upload-area">
                      <label for="teacher-file-input" class="file-upload-label">
                        <div class="upload-icon">
                          <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-text">
                          <h4>Drop files here or click to browse</h4>
                          <p>Supports PDF files up to 10MB each</p>
                        </div>
                        <div class="upload-specs">
                          <span class="spec-item"><i class="fas fa-file-pdf"></i> PDF Format</span>
                          <span class="spec-item"><i class="fas fa-weight"></i> Max 10MB</span>
                          <span class="spec-item"><i class="fas fa-layers"></i> Multiple Files</span>
                        </div>
                      </label>
                      <input type="file" id="teacher-file-input" class="file-input" 
                             accept=".pdf" multiple aria-describedby="teacher-file-help" />
                      <div id="teacher-file-help" class="field-help">Select one or more PDF files</div>
                    </div>
                  </div>
                  
                  <div class="file-list-container">
                    <ul id="teacher-file-list" class="file-list enhanced-file-list"></ul>
                  </div>
                </div>
                
                <div id="teacher-progress-container" class="progress-container advanced-progress" style="display:none;">
                  <div class="progress-header">
                    <h4><i class="fas fa-cog fa-spin"></i> Processing Upload</h4>
                    <span id="teacher-progress-text" class="progress-text">0%</span>
                  </div>
                  <div class="progress">
                    <div id="teacher-progress-bar" class="progress-bar" role="progressbar" 
                         aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                  <div class="progress-details">
                    <span class="detail-item"><i class="fas fa-upload"></i> Uploading files...</span>
                    <span class="detail-item"><i class="fas fa-brain"></i> AI analysis in progress...</span>
                  </div>
                </div>
                
                <div id="teacher-alerts-container" class="alerts-container" aria-live="assertive"></div>
                
                <div class="form-actions">
                  <button type="button" class="btn btn-secondary" onclick="resetForm('teacher')">
                    <i class="fas fa-undo"></i> Reset Form
                  </button>
                  <button type="submit" id="teacher-upload-btn" class="btn btn-primary btn-professional">
                    <i class="fas fa-rocket"></i> 
                    <span>Process Question Paper</span>
                    <div class="btn-shine"></div>
                  </button>
                </div>
              </form>
            </div>
            
            <!-- Answer Key Upload Section -->
            <div id="answer-section" class="upload-section">
              <div class="section-header">
                <div class="header-content">
                  <div class="header-icon">
                    <i class="fas fa-file-certificate"></i>
                  </div>
                  <div class="header-text">
                    <h2>Answer Key Upload Center</h2>
                    <p>Upload comprehensive solution keys to enable intelligent grading and assessment</p>
                  </div>
                </div>
                <div class="header-stats">
                  <div class="stat-item">
                    <i class="fas fa-check-double"></i>
                    <span>Precision Grading</span>
                  </div>
                  <div class="stat-item">
                    <i class="fas fa-brain"></i>
                    <span>Smart Analysis</span>
                  </div>
                  <div class="stat-item">
                    <i class="fas fa-award"></i>
                    <span>Quality Assurance</span>
                  </div>
                </div>
              </div>
              
              <form id="answer-form" class="form professional-form" action="#" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="upload-type" value="answer" />
                
                <div class="form-section">
                  <div class="section-title">
                    <h3><i class="fas fa-info-circle"></i> Solution Details</h3>
                    <p>Configure your answer key for optimal AI grading performance</p>
                  </div>
                  
                  <div class="form-row">
                    <div class="form-group">
                      <label for="answer-assignment-id">
                        <i class="fas fa-hashtag"></i> Assignment ID
                        <span class="required">*</span>
                      </label>
                      <input type="text" id="answer-assignment-id" class="form-control" 
                             placeholder="e.g. PHYS_2024_MIDTERM_01" required />
                      <div class="field-help">Must match the corresponding question paper ID</div>
                    </div>
                    <div class="form-group">
                      <label for="answer-course-id">
                        <i class="fas fa-book"></i> Course Code
                      </label>
                      <input type="text" id="answer-course-id" class="form-control" 
                             placeholder="e.g. PHYS-101, MATH-205" />
                      <div class="field-help">Course or subject classification code</div>
                    </div>
                  </div>
                  
                  <div class="form-row">
                    <div class="form-group">
                      <label for="answer-subject">
                        <i class="fas fa-graduation-cap"></i> Subject Area
                      </label>
                      <input type="text" id="answer-subject" class="form-control" 
                             placeholder="e.g. Advanced Physics, Calculus II" />
                      <div class="field-help">Subject or topic focus</div>
                    </div>
                    <div class="form-group">
                      <label for="answer-difficulty-level">
                        <i class="fas fa-chart-line"></i> Difficulty Level
                      </label>
                      <select id="answer-difficulty-level" class="form-control">
                        <option value="">Select Difficulty</option>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                        <option value="expert">Expert</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="answer-grading-criteria">
                      <i class="fas fa-clipboard-check"></i> Grading Criteria & Instructions
                    </label>
                    <textarea id="answer-grading-criteria" class="form-control advanced-textarea" rows="4" 
                              placeholder="Specify detailed grading instructions, rubrics, partial credit guidelines, common mistakes to watch for, and any special considerations for AI assessment..."></textarea>
                    <div class="field-help">Detailed instructions help improve AI grading accuracy</div>
                  </div>
                </div>
                
                <div class="form-section">
                  <div class="section-title">
                    <h3><i class="fas fa-cloud-upload-alt"></i> Solution File Upload</h3>
                    <p>Upload your comprehensive answer key and solution files</p>
                  </div>
                  
                  <div class="file-upload advanced-upload">
                    <div class="upload-area">
                      <label for="answer-file-input" class="file-upload-label">
                        <div class="upload-icon">
                          <i class="fas fa-file-certificate"></i>
                        </div>
                        <div class="upload-text">
                          <h4>Drop solution files here or click to browse</h4>
                          <p>Upload detailed answer keys and rubrics</p>
                        </div>
                        <div class="upload-specs">
                          <span class="spec-item"><i class="fas fa-file-pdf"></i> PDF Format</span>
                          <span class="spec-item"><i class="fas fa-weight"></i> Max 10MB</span>
                          <span class="spec-item"><i class="fas fa-layers"></i> Multiple Files</span>
                        </div>
                      </label>
                      <input type="file" id="answer-file-input" class="file-input" 
                             accept=".pdf" multiple aria-describedby="answer-file-help" />
                      <div id="answer-file-help" class="field-help">Select one or more PDF files</div>
                    </div>
                  </div>
                  
                  <div class="file-list-container">
                    <ul id="answer-file-list" class="file-list enhanced-file-list"></ul>
                  </div>
                </div>
                
                <div id="answer-progress-container" class="progress-container advanced-progress" style="display:none;">
                  <div class="progress-header">
                    <h4><i class="fas fa-cog fa-spin"></i> Processing Solution</h4>
                    <span id="answer-progress-text" class="progress-text">0%</span>
                  </div>
                  <div class="progress">
                    <div id="answer-progress-bar" class="progress-bar" role="progressbar" 
                         aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                  <div class="progress-details">
                    <span class="detail-item"><i class="fas fa-upload"></i> Uploading solution files...</span>
                    <span class="detail-item"><i class="fas fa-brain"></i> Training AI grader...</span>
                  </div>
                </div>
                
                <div id="answer-alerts-container" class="alerts-container" aria-live="assertive"></div>
                
                <div class="form-actions">
                  <button type="button" class="btn btn-secondary" onclick="resetForm('answer')">
                    <i class="fas fa-undo"></i> Reset Form
                  </button>
                  <button type="submit" id="answer-upload-btn" class="btn btn-primary btn-professional">
                    <i class="fas fa-rocket"></i> 
                    <span>Deploy Answer Key</span>
                    <div class="btn-shine"></div>
                  </button>
                </div>
              </form>
            </div>
            
          </div>
        </div>
      </section>
    </div>
  </main>
  
  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 GradeAnt. All rights reserved.</p>
    </div>
  </footer>
  
  <!-- Scripts -->
  <script src="../component-loader.js"></script>
    <script src="../javascript/upload_pdf.js"></script>
  <script>
    // Professional Upload Interface JavaScript
    class GradeAntUploader {
      constructor() {
        this.currentUploadType = '';
        this.init();
      }
      
      init() {
        this.setupUploadTypeSelector();
        this.setupFileUploads();
        this.setupForms();
        this.setupNavigation();
      }
      
      setupUploadTypeSelector() {
        const uploadOptions = document.querySelectorAll('.upload-option');
        
        uploadOptions.forEach(option => {
          option.addEventListener('click', (e) => {
            // Remove active state from all options
            uploadOptions.forEach(opt => opt.classList.remove('selected'));
            
            // Add active state to clicked option
            option.classList.add('selected');
            
            // Show corresponding upload section
            const uploadType = option.dataset.type;
            this.currentUploadType = uploadType;
            this.showUploadSection(uploadType);
          });
        });
      }
      
      showUploadSection(type) {
        // Hide all upload sections
        document.querySelectorAll('.upload-section').forEach(section => {
          section.classList.remove('active');
        });
        
        // Show selected section with animation
        const targetSection = document.getElementById(`${type}-section`);
        if (targetSection) {
          setTimeout(() => {
            targetSection.classList.add('active');
          }, 150);
        }
      }
      
      setupFileUploads() {
        this.setupFileUpload('teacher');
        this.setupFileUpload('answer');
      }
      
      setupFileUpload(prefix) {
        const fileInput = document.getElementById(`${prefix}-file-input`);
        const fileList = document.getElementById(`${prefix}-file-list`);
        
        if (fileInput && fileList) {
          this.setupDragAndDrop(fileInput, prefix);
          this.setupFileInputHandler(fileInput, fileList, prefix);
        }
      }
      
      setupDragAndDrop(fileInput, prefix) {
        const fileUploadLabel = fileInput.closest('.file-upload')?.querySelector('.file-upload-label');
        if (!fileUploadLabel) return;
        
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          fileUploadLabel.addEventListener(eventName, this.preventDefaults, false);
        });
        
        ['dragenter', 'dragover'].forEach(eventName => {
          fileUploadLabel.addEventListener(eventName, () => {
            fileUploadLabel.classList.add('highlight');
          }, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
          fileUploadLabel.addEventListener(eventName, () => {
            fileUploadLabel.classList.remove('highlight');
          }, false);
        });
        
        fileUploadLabel.addEventListener('drop', (e) => {
          const dt = e.dataTransfer;
          const files = dt.files;
          fileInput.files = files;
          
          // Trigger change event
          const event = new Event('change', { bubbles: true });
          fileInput.dispatchEvent(event);
        }, false);
      }
      
      setupFileInputHandler(fileInput, fileList, prefix) {
        fileInput.addEventListener('change', (e) => {
          const files = Array.from(e.target.files);
          this.displayFiles(files, fileList, prefix);
        });
      }
      
      displayFiles(files, fileList, prefix) {
        fileList.innerHTML = '';
        
        files.forEach((file, index) => {
          const fileItem = document.createElement('li');
          fileItem.className = 'file-item';
          fileItem.innerHTML = `
            <div class="file-info">
              <i class="fas fa-file-pdf"></i>
              <span class="file-name">${file.name}</span>
              <span class="file-size">(${this.formatFileSize(file.size)})</span>
            </div>
            <div class="file-actions">
              <button type="button" class="btn-remove" onclick="window.gradeAntUploader.removeFile('${prefix}', ${index})">
                <i class="fas fa-times"></i>
              </button>
            </div>
          `;
          fileList.appendChild(fileItem);
        });
      }
      
      setupForms() {
        // Setup teacher form
        const teacherForm = document.getElementById('teacher-form');
        if (teacherForm) {
          teacherForm.addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleFormSubmit('teacher');
          });
        }
        
        // Setup answer form
        const answerForm = document.getElementById('answer-form');
        if (answerForm) {
          answerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleFormSubmit('answer');
          });
        }
      }
      
      handleFormSubmit(prefix) {
        // Get form elements
        const form = document.getElementById(`${prefix}-form`);
        const formData = new FormData(form);
        
        // Validate form
        const assignmentId = document.getElementById(`${prefix}-assignment-id`).value;
        if (!assignmentId) {
          this.showAlert(`${prefix}`, 'Please enter an Assignment ID', 'error');
          return;
        }
        
        const fileInput = document.getElementById(`${prefix}-file-input`);
        if (fileInput.files.length === 0) {
          this.showAlert(`${prefix}`, 'Please select at least one file to upload', 'error');
          return;
        }
        
        // Show progress
        this.showProgress(prefix);
        
        // Simulate upload process
        this.simulateUpload(prefix);
      }
      
      showProgress(prefix) {
        const progressContainer = document.getElementById(`${prefix}-progress-container`);
        if (progressContainer) {
          progressContainer.style.display = 'block';
        }
      }
      
      simulateUpload(prefix) {
        const progressBar = document.getElementById(`${prefix}-progress-bar`);
        const progressText = document.getElementById(`${prefix}-progress-text`);
        const uploadBtn = document.getElementById(`${prefix}-upload-btn`);
        
        // Disable button during upload
        if (uploadBtn) {
          uploadBtn.disabled = true;
          const span = uploadBtn.querySelector('span');
          if (span) span.textContent = 'Processing...';
        }
        
        let progress = 0;
        const interval = setInterval(() => {
          progress += Math.random() * 15;
          if (progress > 100) progress = 100;
          
          if (progressBar) {
            progressBar.style.width = `${progress}%`;
            progressBar.setAttribute('aria-valuenow', progress);
          }
          
          if (progressText) {
            progressText.textContent = `${Math.round(progress)}%`;
          }
          
          if (progress >= 100) {
            clearInterval(interval);
            const contentType = prefix === 'teacher' ? 'question paper' : 'answer key';
            this.showAlert(`${prefix}`, `Your ${contentType} has been uploaded and processed successfully.`, 'success');
            
            // Re-enable button
            if (uploadBtn) {
              setTimeout(() => {
                uploadBtn.disabled = false;
                const span = uploadBtn.querySelector('span');
                if (span) {
                  span.textContent = prefix === 'teacher' ? 
                    'Process Question Paper' : 'Deploy Answer Key';
                }
              }, 1500);
            }
          }
        }, 200);
      }
      
      showAlert(prefix, message, type) {
        const alertsContainer = document.getElementById(`${prefix}-alerts-container`);
        if (alertsContainer) {
          const iconClass = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle';
          alertsContainer.innerHTML = `
            <div class="alert alert-${type}">
              <i class="fas ${iconClass}"></i>
              <strong>${type === 'success' ? 'Success!' : 'Error!'}</strong> ${message}
            </div>
          `;
          
          // Auto-remove alert after 5 seconds
          setTimeout(() => {
            alertsContainer.innerHTML = '';
          }, 5000);
        }
      }
      
      preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }
      
      formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }
      
      removeFile(prefix, index) {
        const fileInput = document.getElementById(`${prefix}-file-input`);
        const fileList = document.getElementById(`${prefix}-file-list`);
        
        if (!fileInput || !fileList) return;
        
        // Create a new FileList without the removed file
        const dt = new DataTransfer();
        const files = fileInput.files;
        
        for (let i = 0; i < files.length; i++) {
          if (i !== index) {
            dt.items.add(files[i]);
          }
        }
        
        fileInput.files = dt.files;
        
        // Trigger change event to update the display
        fileInput.dispatchEvent(new Event('change'));
      }
      
      resetForm(prefix) {
        const form = document.getElementById(`${prefix}-form`);
        if (form) form.reset();
        
        const fileList = document.getElementById(`${prefix}-file-list`);
        if (fileList) fileList.innerHTML = '';
        
        const fileInput = document.getElementById(`${prefix}-file-input`);
        if (fileInput) fileInput.value = '';
        
        const progressContainer = document.getElementById(`${prefix}-progress-container`);
        if (progressContainer) progressContainer.style.display = 'none';
        
        const alertsContainer = document.getElementById(`${prefix}-alerts-container`);
        if (alertsContainer) alertsContainer.innerHTML = '';
        
        const uploadBtn = document.getElementById(`${prefix}-upload-btn`);
        if (uploadBtn) {
          uploadBtn.disabled = false;
          const span = uploadBtn.querySelector('span');
          if (span) {
            span.textContent = prefix === 'teacher' ? 
              'Process Question Paper' : 'Deploy Answer Key';
          }
        }
      }
    }

    // Global functions for backward compatibility
    function resetForm(type) {
      if (window.gradeAntUploader) {
        window.gradeAntUploader.resetForm(type);
      }
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      window.gradeAntUploader = new GradeAntUploader();
    });
  </script>
</body>
</html>